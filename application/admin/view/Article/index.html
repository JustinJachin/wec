<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		{include file="public:top"}
		<block name="topCss">
			<!--DataTables css-->
			<link rel="stylesheet" href="__STATIC__/plugins/Datatable/css/dataTables.bootstrap4.css">

			<!--iCheck css-->
			<link rel="stylesheet" href="__STATIC__/plugins/iCheck/all.css">

		</block>
	</head>

	<body class="app ">

		<div id="spinner"></div>

		<div id="app">
			<div class="main-wrapper" >
				{include file="public:header"}
				{include file="public:menu"}
				<block name="bodsy">
					<div class="app-content">
						<section class="section">
							<ol class="breadcrumb">
						        <li class="breadcrumb-item"><a href="{:url('index/index')}">首页</a></li>
						        <li class="breadcrumb-item active" aria-current="page">文章列表</li>
						    </ol>

							<div class="row">
								<div class="col-lg-12">
									<div class="card">
										<div class="card-header">
											<h4>文章列表</h4>
										</div>
										<div class=" col-lg-12" style="margin-top:20px;margin-bottom: -10px;">
											<div class="float-left" style="margin-right: 10px;">
												<a href="{:url('article/add')}" class="btn btn-primary" >添加文章</a> 
											</div>
										</div>
										<div class="card-body">
											<div class="table-responsive">
											<table id="example" class="table table-striped table-bordered border-t0 text-nowrap w-100" >
												<thead>
													<tr class="text-center">
														<th class="wd-20p">ID</th>
														<th class="wd-30p">标题</th>
														<th class="wd-30p">标题图片</th>
														<th class="wd-30p">分类</th>
														<th class="wd-30p">浏览量</th>
														<th class="wd-30p">首页轮播图</th>
														<th class="wd-30p">发布时间</th>
														<th class="wd-30p">更新时间</th>
														<th class="wd-30p">轮播图处理</th>
														<th class="wd-25p">操作</th>
													</tr>
												</thead>
												<tbody>
													{volist name='volist' id="vo"}
													<tr class="text-center">
														<td>{$vo.id}</td>
														<td>{$vo.title}</td>
														<td><img src="__STATIC__{$vo.picture}" width="100" height="100"></td>
														<td>{$vo.typename}</td>
														<td>{$vo.read}</td>
														<td>
															{if condition="$vo['flag'] eq  '是'"}
															<div class="badge badge-info">{$vo.flag}</div>
															{else/}
															<div class="badge badge-warning">{$vo.flag}</div>
															{/if}
														</td>
														<td>{$vo.create_time}</td>
														<td>{$vo.update_time}</td>
														<td>
															<div class="btn-group align-top ">
																{if condition="$vo['flag'] neq  '是'"}
																<button onclick="btn({$vo.id},'start','store')" class="btn btn-sm btn-info  m-b-5 m-t-5" >上架轮播</button>
																{else/}
																<button onclick="btn({$vo.id},'stop','store')" class="btn btn-sm btn-warning  m-b-5 m-t-5" >下架轮播</button>
																{/if}
															</div>
														</td>
														<td>
															
															<div class="btn-group align-top">
																<a href="{:url('article/read?id='.$vo['id'])}" class="btn btn-sm btn-primary m-b-5 m-t-5" target="_blank">查看文章</a>
															</div>
															<div class="btn-group align-top">
																<a href="{:url('article/edit?id='.$vo['id'])}" class="btn btn-sm btn-primary m-b-5 m-t-5">编辑文章</a>
															</div>
															<div class="btn-group align-top">
																<button onclick="btn({$vo.id},'','del')" class="btn btn-sm btn-danger m-b-5 m-t-5 ajax-get"><i class="fa fa-trash"></i></button>
															</div>
														</td>
													
													</tr>
													{/volist}
												</tbody>
											</table>
										</div>
										<div id="page" class="page">
												{$page|raw}
											</div>
										</div>
									</div>
								</div>
							</div>

						</section>
					</div>
					
				</block>
			</div>
		</div>
		<script>
			
		    function btn(id,method,action){
		    	var url="{:url('article/"+action+"')}";
		    	var data={'method':method,'id':id};
		    	// console.log(data);debugger;
		    	AjaxGet(url,data);
		    }
		 
		    

		</script>
		{include file="public:js"}
		<block name="js">
			<!--DataTables css-->
			<script src="__STATIC__/plugins/Datatable/js/jquery.dataTables.js"></script>
			<script src="__STATIC__/plugins/Datatable/js/dataTables.bootstrap4.js"></script>

			<!--Select2 js-->
			<script src="__STATIC__/plugins/select2/select2.full.js"></script>

			<!--Inputmask js-->
			<script src="__STATIC__/plugins/inputmask/jquery.inputmask.js"></script>

			<!--Moment js-->
			<script src="__STATIC__/plugins/moment/moment.min.js"></script>

			<!--Bootstrap-daterangepicker js-->
			<script src="__STATIC__/plugins/bootstrap-daterangepicker/daterangepicker.js"></script>

			<!--Bootstrap-datepicker js-->
			<script src="__STATIC__/plugins/bootstrap-datepicker/bootstrap-datepicker.js"></script>

			<!--Bootstrap-colorpicker js-->
			<script src="__STATIC__/plugins/bootstrap-colorpicker/bootstrap-colorpicker.min.js"></script>

			<!--Bootstrap-timepicker js-->
			<script src="__STATIC__/plugins/bootstrap-timepicker/bootstrap-timepicker.js"></script>

			<!--iCheck js-->
			<script src="__STATIC__/plugins/iCheck/icheck.min.js"></script>

			<!--forms js-->
			<script src="__STATIC__/js/forms.js"></script>

		</block>
	</body>
</html>